"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.findNxWorkspaceRootPath = void 0;
const fs_1 = require("fs");
const path_1 = require("path");
/**
 * Finds the absolute path for the root path of the workspace.
 *
 * This is useful when modules are executed from Nx processes in the node_modules
 * folder like when running as a graph plugin
 */
function findNxWorkspaceRootPath() {
    let workingDirectory = process.cwd();
    // eslint-disable-next-line no-constant-condition
    while (true) {
        if ((0, fs_1.existsSync)((0, path_1.join)(workingDirectory, 'nx.json'))) {
            return workingDirectory;
        }
        else if (workingDirectory === (0, path_1.dirname)(workingDirectory)) {
            throw new Error('At the root of the filesystem');
        }
        workingDirectory = (0, path_1.dirname)(workingDirectory);
    }
}
exports.findNxWorkspaceRootPath = findNxWorkspaceRootPath;
//# sourceMappingURL=find-workspace-root-path.js.map