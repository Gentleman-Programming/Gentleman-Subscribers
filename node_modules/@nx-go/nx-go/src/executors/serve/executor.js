"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const utils_1 = require("../../utils");
function runExecutor(options, context) {
    var _a, _b, _c;
    return (0, tslib_1.__awaiter)(this, void 0, void 0, function* () {
        const projectName = context === null || context === void 0 ? void 0 : context.projectName;
        const sourceRoot = (_b = (_a = context === null || context === void 0 ? void 0 : context.workspace) === null || _a === void 0 ? void 0 : _a.projects[projectName]) === null || _b === void 0 ? void 0 : _b.root;
        const cwd = `${options.cwd || sourceRoot}`;
        // We strip the project root from the main file
        const mainFile = (_c = options.main) === null || _c === void 0 ? void 0 : _c.replace(`${cwd}/`, '');
        return (0, utils_1.runGoCommand)(context, 'run', [mainFile, ...options.arguments], { cmd: options.cmd, cwd });
    });
}
exports.default = runExecutor;
//# sourceMappingURL=executor.js.map