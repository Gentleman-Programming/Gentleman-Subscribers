"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const child_process_1 = require("child_process");
function runExecutor(options, context) {
    var _a, _b, _c, _d, _e, _f;
    return (0, tslib_1.__awaiter)(this, void 0, void 0, function* () {
        const projectName = context.projectName;
        const cwd = (_b = (_a = context.workspace.projects[projectName]) === null || _a === void 0 ? void 0 : _a.root) !== null && _b !== void 0 ? _b : '';
        const isVerbose = (_c = context.isVerbose) !== null && _c !== void 0 ? _c : false;
        const sources = `./...`;
        const linter = (_d = options.linter) !== null && _d !== void 0 ? _d : 'go fmt'; // Keeping default from initial version of linter
        const args = (_f = (_e = options.args) === null || _e === void 0 ? void 0 : _e.trim()) !== null && _f !== void 0 ? _f : '';
        const command = [linter, args, sources].filter((a) => a).join(' ');
        if (isVerbose) {
            console.log(`Executing Lint linter: '${linter}', arguments: '${args}', cwd: '${cwd}', command: '${command}'`);
        }
        try {
            (0, child_process_1.execSync)(command, { cwd, stdio: [0, 1, 2] });
            return { success: true };
        }
        catch (ex) {
            console.error(ex);
            return { success: false };
        }
    });
}
exports.default = runExecutor;
//# sourceMappingURL=executor.js.map